---
- name: Create instance using terraform script
  hosts: 35.204.152.104
  become: true
  become_method: sudo
  tasks:      
    - name: Download Terraform script
      get_url:
        url: https://storage.googleapis.com/jimmy-playbooks/TerraformScript.tf
        dest: /terraform_path/main.tf

    - name: Change to Terraform directory
      ansible.builtin.command: cd /terraform_path/

    - name: Run Terraform apply
      ansible.builtin.command: terraform apply -auto-approve
      args:
        chdir: /terraform_path
